---
import { Image } from 'astro:assets';
import { Icon } from 'astro-icon/components';
import featureImage1 from '../assets/configuration.png';
import featureImage2 from '../assets/driverReport.png';
import featureImage3 from '../assets/salaryReport.png';
import { home } from '../content/texts';

const imageMap = { salaryReport: featureImage3, driverReport: featureImage2, configuration: featureImage1 };
const features = home.features.map(f => ({ ...f, image: imageMap[f.image as keyof typeof imageMap] }));
---

<section id="funktioner" class="py-20 bg-gradient-to-b from-white to-gray-50 relative overflow-hidden">
  <!-- Subtle background pattern with parallax effect -->
  <div class="absolute inset-0 opacity-5 parallax" data-speed="0.1">
    <div class="absolute inset-0 bg-repeat" style="background-image: url('/grid-pattern.svg');"></div>
  </div>

  <div class="container-custom relative">
    <div class="text-center max-w-3xl mx-auto">
      <h2 class="animate-on-scroll delay-0 text-3xl md:text-4xl font-bold">
        {home.featuresSection.title}
      </h2>
      <p class="animate-on-scroll delay-1 mt-4 text-xl text-gray-600">
        {home.featuresSection.subtitle}
      </p>
    </div>

    <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
      {features.map((feature, index) => (
        <div class={`feature-card animate-on-scroll delay-${index + 2} group`}>
          <div class="h-12 w-12 rounded-lg bg-gradient-to-r from-blue-600 to-blue-500 flex items-center justify-center text-white mb-6 transition-transform duration-300 group-hover:scale-110">
            <Icon name={feature.icon} class="h-6 w-6 transition-transform duration-300 group-hover:rotate-12" />
          </div>
          <h3 class="text-xl font-semibold transition-colors duration-300 group-hover:text-blue-600">{feature.title}</h3>
          <p class="mt-3 text-gray-600">{feature.description}</p>
          <div class="mt-6 hover-zoom rounded-lg overflow-hidden">
            <Image
              src={feature.image}
              alt={feature.title}
              class="w-full h-auto rounded-lg transition-all duration-500"
              width={300}
              height={200}
            />
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
